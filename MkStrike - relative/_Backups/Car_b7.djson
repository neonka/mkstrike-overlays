{"Variables":{"DashboardVariables":[{"VariableName":"driverIndex","EvaluateOnlyOnce":false,"OverrideWithParentDashboardVariableWhenAvailable":true,"ValueExpression":{"JSExt":0,"Interpreter":1,"Expression":"return 0;"},"EvaluateBeforeScreenRoles":false},{"VariableName":"direction","EvaluateOnlyOnce":false,"OverrideWithParentDashboardVariableWhenAvailable":true,"ValueExpression":{"JSExt":0,"Interpreter":1,"Expression":"return 'Behind'"},"EvaluateBeforeScreenRoles":false},{"VariableName":"isPlayer","EvaluateOnlyOnce":false,"OverrideWithParentDashboardVariableWhenAvailable":true,"ValueExpression":{"JSExt":0,"Interpreter":1,"Expression":"return false;"},"EvaluateBeforeScreenRoles":false}]},"DashboardDebugManager":{"WindowPositionSettings":{"IsFullScreen":false,"Position":"0,302,461,25","TopMost":false,"AllowTransparency":false,"CloseOnMonitorLoss":false,"NoWindowActivate":false}},"Version":2,"Id":"5fff49e6-81f9-4e86-8bdb-42d65193079d","BaseHeight":25,"BaseWidth":522,"BackgroundColor":"#FF000000","Screens":[{"RenderingSkip":0,"Name":"Screen","InGameScreen":true,"IdleScreen":true,"PitScreen":false,"ScreenId":"a410ffe5-8b55-459c-9a24-e6d8ae70ad88","AllowOverlays":true,"IsForegroundLayer":false,"IsOverlayLayer":false,"OverlayTriggerExpression":{"Expression":""},"ScreenEnabledExpression":{"Expression":""},"OverlayMaxDuration":0,"OverlayMinDuration":0,"IsBackgroundLayer":false,"BackgroundColor":"#00FFFFFF","Items":[{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.RectangleItem, SimHub.Plugins","IsRectangleItem":true,"BackgroundColor":"#FFF0F8FF","Height":25.0,"Left":73.0,"Top":0.0,"Visible":true,"Width":37.0,"Name":"Background_CarModel","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"BackgroundColor":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getBackgroundCarModel();"},"Mode":2},"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_IsCarVisible();"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.RectangleItem, SimHub.Plugins","IsRectangleItem":true,"BackgroundColor":"#C80F0F0F","Height":25.0,"Left":0.0,"Top":0.0,"Visible":true,"Width":550.0,"Name":"Background","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"BackgroundColor":{"Formula":{"JSExt":0,"Interpreter":1,"Expression":"const driverIndex = +$prop('variable.driverIndex');\r\n\r\nif($prop('variable.isPlayer')){\r\n\treturn '#C8636363';\r\n}\r\n\r\nif(driverIndex % 2 === 0){\r\n\treturn '#C8000000';\t\r\n} else if($prop('variable.isPlayer')){\r\n\treturn '#C80F0F0F';\t\r\n}\r\nelse {\r\n\treturn '#C80F0F0F';\r\n}"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Roboto","FontWeight":"Bold","TextPadding":{"PaddingTop":1,"PaddingBottom":1,"PaddingLeft":1,"PaddingRight":1},"FontSize":15.0,"Text":"2.3k","TextColor":"#FF000000","HorizontalAlignment":1,"VerticalAlignment":1,"TextMask":"0000000000","BackgroundColor":"#FFFFFFFF","BorderStyle":{"RadiusTopLeft":5,"RadiusTopRight":5,"RadiusBottomLeft":5,"RadiusBottomRight":5},"Height":18.0,"Left":335.0,"Top":3.0,"Visible":true,"Width":45.0,"Name":"IR","RenderingSkip":100,"MinimumRefreshIntervalMS":1000.0,"Bindings":{"Text":{"FormatString":"0.0.k","Formula":{"JSExt":1,"Interpreter":1,"Expression":"let licence;\r\nif($prop('variable.isPlayer')){\r\n\tlicence = $prop('IRacingExtraProperties.iRacing_Player_LicenceString');\r\n}else{\r\n\tconst direction = $prop('variable.direction');\r\n\tconst driverIndex = mk_NumberToTwoDigitString(+$prop('variable.driverIndex'));\r\n\tlicence = $prop('IRacingExtraProperties.iRacing_Driver'+direction+'_'+driverIndex+'_LicenceString');\r\n}\r\nreturn licence.split(' ')[1];"},"Mode":2},"FontSize":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getCarFontSize()"},"Mode":2},"Height":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getBadgeHeight();"},"Mode":2},"Top":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const diff = mk_getRowHeight() - mk_getBadgeHeight();\r\nreturn Math.trunc(diff / 2);"},"Mode":2},"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_IsCarVisible();"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"ShadowColor":"#FF000000","Font":"Roboto","FontWeight":"Bold","TextPadding":{"PaddingTop":1,"PaddingBottom":1,"PaddingLeft":1,"PaddingRight":1},"FontSize":15.0,"Text":"A2.3","TextColor":"#FF000000","HorizontalAlignment":1,"VerticalAlignment":1,"TextMask":"0000000000","BackgroundColor":"#FFFFFFFF","BorderStyle":{"RadiusTopLeft":5,"RadiusTopRight":5,"RadiusBottomLeft":5,"RadiusBottomRight":5},"Height":18.0,"Left":293.0,"Top":3.0,"Visible":true,"Width":39.0,"Name":"SR","RenderingSkip":100,"MinimumRefreshIntervalMS":1000.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"let licence;\r\nif($prop('variable.isPlayer'))\r\n\tlicence = $prop('IRacingExtraProperties.iRacing_Player_SafetyRating');\r\nelse{\r\n\tconst direction = $prop('variable.direction');\r\n\tconst driverIndex = mk_NumberToTwoDigitString(+$prop('variable.driverIndex'));\r\n\tlicence = $prop('IRacingExtraProperties.iRacing_Driver'+direction+'_'+driverIndex+'_SafetyRating');\r\n}\r\nlicence = licence.replace(/\\s/g, \"\");\r\nlicence = licence.substring(0, licence.length - 1);\r\nreturn licence;"},"Mode":2},"BackgroundColor":{"Formula":{"JSExt":3,"Interpreter":1,"Expression":"// const direction = $prop('variable.direction');\r\n// const driverIndex = mk_NumberToTwoDigitString($prop('variable.driverIndex'));\r\n// return $prop('iRacingExtraProperties.iRacing_Driver'+direction+'_'+driverIndex+'_LicenceColor')\r\nreturn mk_getSRBackgroundColor();"},"Mode":2},"FontSize":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getCarFontSize()"},"Mode":2},"Height":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getBadgeHeight();"},"Mode":2},"Top":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const diff = mk_getRowHeight() - mk_getBadgeHeight();\r\nreturn Math.trunc(diff / 2);"},"Mode":2},"TextColor":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"let licence;\r\nif($prop('variable.isPlayer'))\r\n\tlicence = $prop('IRacingExtraProperties.iRacing_Player_SafetyRating');\r\nelse{\r\n\tconst direction = $prop('variable.direction');\r\n\tconst driverIndex = mk_NumberToTwoDigitString(+$prop('variable.driverIndex'));\r\n\tlicence = $prop('IRacingExtraProperties.iRacing_Driver'+direction+'_'+driverIndex+'_SafetyRating');\r\n}\r\nlicence = licence.replace(/\\s/g, \"\");\r\nlicence = licence.substring(0, licence.length - 1);\r\nif(licence.startsWith('A') || licence.startsWith('R')){\r\n\treturn 'white';\r\n}else{\r\n\treturn 'black';\r\n}"},"Mode":2},"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_IsCarVisible();"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Roboto","FontWeight":"Bold","FontSize":16.0,"Text":"00","TextColor":"#FF000000","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#FFFFFFFF","Height":25.0,"Left":0.0,"Top":0.0,"Visible":true,"Width":25.0,"Name":"Position","OriginalName":"TextItem0","RenderingSkip":50,"MinimumRefreshIntervalMS":500.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"let position;\r\n\r\nif($prop('variable.isPlayer'))\r\n\tposition = $prop('IRacingExtraProperties.iRacing_Player_PositionInClass')\r\nelse{\r\n\tconst direction = $prop('variable.direction');\r\n\tconst driverIndex = mk_NumberToTwoDigitString(+$prop('variable.driverIndex'));\r\n\tposition = $prop('IRacingExtraProperties.iRacing_Driver'+direction+'_'+driverIndex+'_PositionInClass')//$prop('PersistantTrackerPlugin.Driver'+direction+'_'+driverIndex+'_Position');\r\n}\r\n\r\nif(position === 0)\r\n\treturn '-';\r\n\t\r\nreturn position;"},"Mode":2},"FontSize":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getCarFontSize()"},"Mode":2},"Height":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getRowHeight();"},"Mode":2},"BackgroundColor":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"//$prop('IRacingExtraProperties.iRacing_DriverBehind_00_ClassColor')\r\n//$prop('PersistantTrackerPlugin.Driver'+direction+'_'+driverIndex+'_ClassColor');\r\n\r\nlet color;\r\nif($prop('variable.isPlayer'))\r\n\tcolor = $prop('IRacingExtraProperties.iRacing_Player_ClassColor');\r\nelse{\r\n\tconst direction = $prop('variable.direction');\r\n\tconst driverIndex = mk_NumberToTwoDigitString(+$prop('variable.driverIndex'));\r\n\tcolor = $prop('IRacingExtraProperties.iRacing_Driver'+direction+'_'+driverIndex+'_ClassColor');\r\n}\r\nreturn color;"},"Mode":2},"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_IsCarVisible();"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Roboto","FontWeight":"Bold","FontSize":16.0,"Text":"#000","TextColor":"#FFFFFFFF","HorizontalAlignment":2,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":25.0,"Left":20.0,"Top":0.0,"Visible":true,"Width":48.0,"Name":"CarNumber","RenderingSkip":100,"MinimumRefreshIntervalMS":1000.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"let carNumber;\r\nif($prop('variable.isPlayer'))\r\n\tcarNumber = $prop('IRacingExtraProperties.iRacing_Player_CarNumber');\r\nelse{\r\n\tconst direction = $prop('variable.direction');\r\n\tconst driverIndex = mk_NumberToTwoDigitString(+$prop('variable.driverIndex'));\r\n\tcarNumber = $prop('PersistantTrackerPlugin.Driver'+direction+'_'+driverIndex+'_CarNumber');\r\n}\r\n\r\nif(!carNumber)\r\n\treturn '-';\r\n\t\r\nreturn '#' + carNumber;"},"Mode":2},"TextColor":{"Formula":{"JSExt":3,"Interpreter":1,"Expression":"if($prop('variable.isPlayer')){\r\n\treturn '#FFFFE04C';\r\n}\r\n\r\nconst direction = $prop('variable.direction');\r\nvar driver_rel = 'Driver'+direction+'_'+mk_NumberToTwoDigitString($prop('variable.driverIndex'));\r\n\r\nvar driver_gap = drivergaptoplayer( $prop('PersistantTrackerPlugin.'+driver_rel+'_Position'));\r\n\r\nvar driver_lap = timespantoseconds(driverlastlap( $prop('DataCorePlugin.GameData.BestLapOpponentPosition') ));\r\n\r\nif (driver_lap > 0 && $prop('DataCorePlugin.GameData.SessionTypeName') == 'Race') {\r\n\r\n\tif (\r\n\t\t$prop('PersistantTrackerPlugin.'+driver_rel+'_CurrentLap') - $prop('DataCorePlugin.GameData.CurrentLap') >= 2 ) {\r\n\t\t\r\n\t\treturn '#FF7400' // 2+ Laps Ahead\r\n\t\t\r\n\t} else if (\r\n\t\t$prop('PersistantTrackerPlugin.'+driver_rel+'_CurrentLap') - $prop('DataCorePlugin.GameData.CurrentLap') <= -2 ) {\r\n\t\t\r\n\t\treturn '#00BFFF' // 2- Laps Behind\r\n\t\t\r\n\t} else {\r\n\t\r\n\t\tif ( driver_lap + driver_gap < (driver_lap * 0.15) ) {\r\n\t\t\t\r\n\t\t\treturn '#FF7400' // Ahead\r\n\t\t\t\r\n\t\t} else if ( driver_lap + driver_gap > driver_lap+(driver_lap * 0.85) ) {\r\n\t\t\r\n\t\t\treturn '#00BFFF' // Behind\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\r\n\t\t\treturn '#FFFFFF' // Same Lap\r\n\t\t\t\r\n\t\t}\r\n\t\t\t\r\n\t\t\r\n\t}\r\n\t\r\n} else {\r\n\r\n\treturn '#FFFFFF'\r\n\r\n}"},"Mode":2},"FontSize":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getCarFontSize()"},"Mode":2},"Height":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getRowHeight();"},"Mode":2},"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_IsCarVisible();"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Roboto","FontWeight":"Bold","FontSize":16.0,"Text":"A Driver","TextColor":"#FFFFFFFF","HorizontalAlignment":0,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":25.0,"Left":114.0,"Top":0.0,"Visible":true,"Width":150.0,"Name":"Driver name","RenderingSkip":100,"MinimumRefreshIntervalMS":1000.0,"Bindings":{"Text":{"Formula":{"JSExt":3,"Interpreter":1,"Expression":"let name;\r\n\r\nif($prop('variable.isPlayer'))\r\n\tname = $prop('DataCorePlugin.GameData.PlayerName');\r\n\telse{\r\n\tconst direction = $prop('variable.direction');\r\n\tconst driverIndex = mk_NumberToTwoDigitString(+$prop('variable.driverIndex'));\r\n\tname = $prop('PersistantTrackerPlugin.Driver'+direction+'_'+driverIndex+'_Name');\r\n}\r\n\r\nif(!name)\r\n\treturn '-';\r\n\r\nreturn name;\r\n\r\n//const full_name = name.split(' ');\r\n//return full_name[0].substr(0,1) + '. ' + full_name[full_name.length-1]"},"Mode":2},"TextColor":{"Formula":{"JSExt":3,"Interpreter":1,"Expression":"if($prop('variable.isPlayer')){\r\n\treturn '#FFFFE04C';\r\n}\r\n\r\nconst direction = $prop('variable.direction');\r\nvar driver_rel = 'Driver'+direction+'_'+mk_NumberToTwoDigitString($prop('variable.driverIndex'));\r\n\r\nvar driver_gap = drivergaptoplayer( $prop('PersistantTrackerPlugin.'+driver_rel+'_Position'));\r\n\r\nvar driver_lap = timespantoseconds(driverlastlap( $prop('DataCorePlugin.GameData.BestLapOpponentPosition') ));\r\n\r\nif (driver_lap > 0 && $prop('DataCorePlugin.GameData.SessionTypeName') == 'Race') {\r\n\r\n\tif (\r\n\t\t$prop('PersistantTrackerPlugin.'+driver_rel+'_CurrentLap') - $prop('DataCorePlugin.GameData.CurrentLap') >= 2 ) {\r\n\t\t\r\n\t\treturn '#FF7400' // 2+ Laps Ahead\r\n\t\t\r\n\t} else if (\r\n\t\t$prop('PersistantTrackerPlugin.'+driver_rel+'_CurrentLap') - $prop('DataCorePlugin.GameData.CurrentLap') <= -2 ) {\r\n\t\t\r\n\t\treturn '#00BFFF' // 2- Laps Behind\r\n\t\t\r\n\t} else {\r\n\t\r\n\t\tif ( driver_lap + driver_gap < (driver_lap * 0.15) ) {\r\n\t\t\t\r\n\t\t\treturn '#FF7400' // Ahead\r\n\t\t\t\r\n\t\t} else if ( driver_lap + driver_gap > driver_lap+(driver_lap * 0.85) ) {\r\n\t\t\r\n\t\t\treturn '#00BFFF' // Behind\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\r\n\t\t\treturn '#FFFFFF' // Same Lap\r\n\t\t\t\r\n\t\t}\r\n\t\t\t\r\n\t\t\r\n\t}\r\n\t\r\n} else {\r\n\r\n\treturn '#FFFFFF'\r\n\r\n}"},"Mode":2},"FontSize":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getCarFontSize()"},"Mode":2},"Height":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getRowHeight()"},"Mode":2},"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_IsCarVisible();"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Roboto","FontWeight":"Bold","FontSize":16.0,"Text":"+000.0","TextColor":"#FFFFFFFF","HorizontalAlignment":2,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":24.0,"Left":455.0,"Top":0.0,"Visible":true,"Width":65.0,"Name":"Gap (iRacing)","RenderingSkip":10,"MinimumRefreshIntervalMS":100.0,"Bindings":{"Text":{"FormatString":"0.0","Formula":{"JSExt":1,"Interpreter":1,"Expression":"if($prop('variable.isPlayer'))\r\n\treturn '0.0';\r\n\r\nconst direction = $prop('variable.direction');\r\nconst driverIndex = mk_NumberToTwoDigitString(+$prop('variable.driverIndex'));\r\n//const gap = +$prop('PersistantTrackerPlugin.Driver'+direction+'_' + driverIndex + '_Gap');\r\nconst gap = +$prop('IRacingExtraProperties.iRacing_Driver'+direction+'_'+driverIndex+'_RelativeGapToPlayer')\r\nreturn  Math.abs(gap);"},"Mode":2},"TextColor":{"Formula":{"JSExt":3,"Interpreter":1,"Expression":"if($prop('variable.isPlayer')){\r\n\treturn '#FFFFE04C';\r\n}\r\n\r\nconst direction = $prop('variable.direction');\r\nvar driver_rel = 'Driver'+direction+'_'+mk_NumberToTwoDigitString($prop('variable.driverIndex'));\r\n\r\nvar driver_gap = drivergaptoplayer( $prop('PersistantTrackerPlugin.'+driver_rel+'_Position'));\r\n\r\nvar driver_lap = timespantoseconds(driverlastlap( $prop('DataCorePlugin.GameData.BestLapOpponentPosition') ));\r\n\r\nif (driver_lap > 0 && $prop('DataCorePlugin.GameData.SessionTypeName') == 'Race') {\r\n\r\n\tif (\r\n\t\t$prop('PersistantTrackerPlugin.'+driver_rel+'_CurrentLap') - $prop('DataCorePlugin.GameData.CurrentLap') >= 2 ) {\r\n\t\t\r\n\t\treturn '#FF7400' // 2+ Laps Ahead\r\n\t\t\r\n\t} else if (\r\n\t\t$prop('PersistantTrackerPlugin.'+driver_rel+'_CurrentLap') - $prop('DataCorePlugin.GameData.CurrentLap') <= -2 ) {\r\n\t\t\r\n\t\treturn '#00BFFF' // 2- Laps Behind\r\n\t\t\r\n\t} else {\r\n\t\r\n\t\tif ( driver_lap + driver_gap < (driver_lap * 0.15) ) {\r\n\t\t\t\r\n\t\t\treturn '#FF7400' // Ahead\r\n\t\t\t\r\n\t\t} else if ( driver_lap + driver_gap > driver_lap+(driver_lap * 0.85) ) {\r\n\t\t\r\n\t\t\treturn '#00BFFF' // Behind\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\r\n\t\t\treturn '#FFFFFF' // Same Lap\r\n\t\t\t\r\n\t\t}\r\n\t\t\t\r\n\t\t\r\n\t}\r\n\t\r\n} else {\r\n\r\n\treturn '#FFFFFF'\r\n\r\n}"},"Mode":2},"FontSize":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getCarFontSize()"},"Mode":2},"Height":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getRowHeight();"},"Mode":2},"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_IsCarVisible();"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Roboto","FontWeight":"Bold","FontSize":16.0,"Text":"+000.0","TextColor":"#FFFFFFFF","HorizontalAlignment":2,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":24.0,"Left":455.0,"Top":0.0,"Visible":false,"Width":65.0,"Name":"Gap (Persitance)","RenderingSkip":10,"MinimumRefreshIntervalMS":100.0,"Bindings":{"Text":{"FormatString":"0.0","Formula":{"JSExt":1,"Interpreter":1,"Expression":"if($prop('variable.isPlayer'))\r\n\treturn '0.0';\r\n\r\nconst direction = $prop('variable.direction');\r\nconst driverIndex = mk_NumberToTwoDigitString(+$prop('variable.driverIndex'));\r\nconst gap = +$prop('PersistantTrackerPlugin.Driver'+direction+'_' + driverIndex + '_Gap');\r\nreturn  Math.abs(gap);"},"Mode":2},"TextColor":{"Formula":{"JSExt":3,"Interpreter":1,"Expression":"if($prop('variable.isPlayer')){\r\n\treturn '#FFFFE04C';\r\n}\r\n\r\nconst direction = $prop('variable.direction');\r\nvar driver_rel = 'Driver'+direction+'_'+mk_NumberToTwoDigitString($prop('variable.driverIndex'));\r\n\r\nvar driver_gap = drivergaptoplayer( $prop('PersistantTrackerPlugin.'+driver_rel+'_Position'));\r\n\r\nvar driver_lap = timespantoseconds(driverlastlap( $prop('DataCorePlugin.GameData.BestLapOpponentPosition') ));\r\n\r\nif (driver_lap > 0 && $prop('DataCorePlugin.GameData.SessionTypeName') == 'Race') {\r\n\r\n\tif (\r\n\t\t$prop('PersistantTrackerPlugin.'+driver_rel+'_CurrentLap') - $prop('DataCorePlugin.GameData.CurrentLap') >= 2 ) {\r\n\t\t\r\n\t\treturn '#FF7400' // 2+ Laps Ahead\r\n\t\t\r\n\t} else if (\r\n\t\t$prop('PersistantTrackerPlugin.'+driver_rel+'_CurrentLap') - $prop('DataCorePlugin.GameData.CurrentLap') <= -2 ) {\r\n\t\t\r\n\t\treturn '#00BFFF' // 2- Laps Behind\r\n\t\t\r\n\t} else {\r\n\t\r\n\t\tif ( driver_lap + driver_gap < (driver_lap * 0.15) ) {\r\n\t\t\t\r\n\t\t\treturn '#FF7400' // Ahead\r\n\t\t\t\r\n\t\t} else if ( driver_lap + driver_gap > driver_lap+(driver_lap * 0.85) ) {\r\n\t\t\r\n\t\t\treturn '#00BFFF' // Behind\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\r\n\t\t\treturn '#FFFFFF' // Same Lap\r\n\t\t\t\r\n\t\t}\r\n\t\t\t\r\n\t\t\r\n\t}\r\n\t\r\n} else {\r\n\r\n\treturn '#FFFFFF'\r\n\r\n}"},"Mode":2},"FontSize":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getCarFontSize()"},"Mode":2},"Height":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getRowHeight();"},"Mode":2},"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return false;\r\nreturn mk_IsCarVisible();"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Roboto","FontWeight":"Bold","TextPadding":{"PaddingLeft":5},"FontSize":15.0,"Text":"L0","TextColor":"#FF000000","HorizontalAlignment":0,"VerticalAlignment":1,"BackgroundColor":"#FFFECE00","BorderStyle":{"RadiusTopLeft":5,"RadiusTopRight":5,"RadiusBottomLeft":5,"RadiusBottomRight":5},"Height":18.0,"Left":255.0,"Opacity":50.0,"Top":3.0,"Visible":true,"Width":35.0,"Name":"Laps","RenderingSkip":100,"MinimumRefreshIntervalMS":1000.0,"Bindings":{"Text":{"Formula":{"JSExt":3,"Interpreter":1,"Expression":"let laps;\r\nif($prop('variable.isPlayer'))\r\n\tlaps = $prop('IRacingExtraProperties.iRacing_Player_LapsSinceLastPit');\r\nelse{\r\n\tconst direction = $prop('variable.direction');\r\n\tconst driverIndex = mk_NumberToTwoDigitString(+$prop('variable.driverIndex'));\r\n\tlaps = $prop('IRacingExtraProperties.iRacing_Driver'+direction+'_' + driverIndex+ \r\n'_LapsSinceLastPit');\r\n}\r\nreturn 'L' + laps;"},"Mode":2},"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"let laps;\r\nif($prop('variable.isPlayer'))\r\n\tlaps = $prop('IRacingExtraProperties.iRacing_Player_LapsSinceLastPit');\r\nelse {\t\r\n\tconst direction = $prop('variable.direction');\r\n\tconst driverIndex = mk_NumberToTwoDigitString($prop('variable.driverIndex'));\r\n\tconst laps = $prop('IRacingExtraProperties.iRacing_Driver'+direction+'_'+driverIndex+'_LapsSinceLastPit');\r\n}\r\nreturn laps > 0;"},"Mode":2},"Height":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getBadgeHeight();"},"Mode":2},"Top":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const diff = mk_getRowHeight() - mk_getBadgeHeight();\r\nreturn Math.trunc(diff / 2);"},"Mode":2},"FontSize":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getCarFontSize()"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.ImageItem, SimHub.Plugins","AutoSize":true,"AutoSizeScale":0.1,"BackgroundColor":"#00FFFFFF","Height":15.3,"Left":78.0,"Top":4.0,"Visible":true,"Width":26.6,"Name":"ImageItem","RenderingSkip":100,"MinimumRefreshIntervalMS":1000.0,"Bindings":{"Image":{"Formula":{"JSExt":3,"Interpreter":1,"Expression":"if($prop('variable.isPlayer')){\r\n\t//log($prop('CarModel'));\r\n\treturn mk_getCarImageName($prop('CarModel'));\r\n}\r\nelse{\r\n\tconst direction = $prop('variable.direction');\r\n\tconst driverIndex = mk_NumberToTwoDigitString(+$prop('variable.driverIndex'));\r\n\tconst carName = $prop('PersistantTrackerPlugin.Driver'+direction+'_'+driverIndex+'_CarName');\r\n\t//log(carName);\r\n\treturn mk_getCarImageName(carName);\r\n}"},"Mode":2},"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_IsCarVisible();"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Roboto","FontWeight":"Bold","FontSize":16.0,"Text":"01:55.100","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":25.0,"Left":385.0,"Top":0.0,"Visible":true,"Width":80.0,"Name":"Last lap time","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"let lastLapTime;\r\nif($prop('variable.isPlayer')){\r\n\t//lastLapTime = $prop('IRacingExtraProperties.iRacing_Player_LastLapTime');\r\n\tlastLapTime = ''+$prop('DataCorePlugin.GameData.LastLapTime');\r\n\tlog('LastLapTime: ' + lastLapTime);\r\n}\r\nelse{\r\n\tconst direction = $prop('variable.direction');\r\n\tconst driverIndex = mk_NumberToTwoDigitString(+$prop('variable.driverIndex'));\r\n\tlastLapTime = ''+$prop('IRacingExtraProperties.iRacing_Driver'+direction+'_' + driverIndex+ \r\n'_LastLapTime');\r\n}\r\nif('00:00:00' == lastLapTime || !lastLapTime)\r\n\treturn '-';\r\nif((''+lastLapTime).substring(0, 2) > 0){\r\n\t// fastest lap is greater than hour.. dont care display empty\r\n\treturn '-';\r\n}\r\n\r\nreturn lastLapTime.substring(3,  lastLapTime.length - 4);"},"Mode":2},"FontSize":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getCarFontSize();"},"Mode":2},"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"//log('Relative.Car.LastLapTime.Invisible -> removebefore release');\r\n//return false;\r\nreturn mk_IsCarVisible();"},"Mode":2},"Height":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"return mk_getRowHeight();"},"Mode":2},"TextColor":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const classIndex = mk_NumberToTwoDigitString($prop('variable.classIndex1'));\r\nconst driverIndex = mk_NumberToTwoDigitString($prop('variable.driverIndex'));\r\n\r\nconst carNumber = $prop('IRacingExtraProperties.iRacing_Class_' + classIndex + '_Leaderboard_Driver_' + driverIndex + '_CarNumber');\r\n\r\nconst playerCarNumber = $prop('IRacingExtraProperties.iRacing_Player_CarNumber');\r\n\r\nif(carNumber == playerCarNumber){\r\n\treturn  mk_isPlayerTextColor();\r\n}else{\r\n\treturn 'white';\r\n}"},"Mode":2}}}],"MinimumRefreshIntervalMS":0.0}],"SnapToGrid":false,"HideLabels":true,"ShowForeground":true,"ForegroundOpacity":100.0,"ShowBackground":true,"BackgroundOpacity":100.0,"ShowBoundingRectangles":false,"GridSize":10,"Images":[{"Name":"Acura","Extension":".png","Modified":false,"Optimized":true,"Length":7437,"MD5":"a3d6ff67e8f4050a4a4490cdeaab7515"},{"Name":"Aston Martin","Extension":".png","Modified":false,"Optimized":true,"Length":22432,"MD5":"2cda6ed6106915460313d8320bcc196d"},{"Name":"Audi","Extension":".png","Modified":false,"Optimized":true,"Length":24148,"MD5":"3c7ddf42a6436ebfa10d17416d6b71f1"},{"Name":"BMW","Extension":".png","Modified":false,"Optimized":true,"Length":18414,"MD5":"fcd5f3a591c38204059b9d9881f5edc6"},{"Name":"Cadillac","Extension":".png","Modified":false,"Optimized":true,"Length":29199,"MD5":"91f71897885747a8222226cb955a5258"},{"Name":"Dalara","Extension":".png","Modified":false,"Optimized":true,"Length":8938,"MD5":"1f5f297dc6d237267910a00e3473d9ca"},{"Name":"disconnected","Extension":".png","Modified":false,"Optimized":true,"Length":1514,"MD5":"3366b478a84d9b7649857b811ae47e2c"},{"Name":"Ferrari","Extension":".png","Modified":false,"Optimized":true,"Length":7330,"MD5":"5a6b921e28c2b41321d7c82eb7675071"},{"Name":"Ford","Extension":".png","Modified":false,"Optimized":true,"Length":31794,"MD5":"8c384959d2957e2740b6c7798a076f1f"},{"Name":"Formula Renault 2.0","Extension":".png","Modified":false,"Optimized":true,"Length":15889,"MD5":"c30c7cd3a04280d39742944a69c838a9"},{"Name":"Formula Renault 3.5","Extension":".png","Modified":false,"Optimized":true,"Length":13251,"MD5":"50f98c71125efde25afcd84309b6d287"},{"Name":"green_arrow","Extension":".png","Modified":false,"Optimized":true,"Length":2869,"MD5":"3aee2b6183cb560a22f94fc298a44561"},{"Name":"Holden","Extension":".png","Modified":false,"Optimized":true,"Length":32885,"MD5":"a43d089035bd55799795c938766d3b4c"},{"Name":"HPD ARX-01c","Extension":".png","Modified":false,"Optimized":true,"Length":25557,"MD5":"e8e36a19465afff8f9149bb8b509d0b2"},{"Name":"Chevrolet","Extension":".png","Modified":false,"Optimized":true,"Length":18094,"MD5":"f97aab03f0c5bfd8bc409a96da25db49"},{"Name":"Kia","Extension":".png","Modified":false,"Optimized":true,"Length":35360,"MD5":"e97b22c5749614697b9b14a94eb3f775"},{"Name":"Lamborghini","Extension":".png","Modified":false,"Optimized":true,"Length":15221,"MD5":"8c5d6bb0b03bdc9f253100f110d73a87"},{"Name":"Ligier","Extension":".png","Modified":false,"Optimized":true,"Length":5550,"MD5":"32bebc9f3027cc01bf944f8e9cfa7ca2"},{"Name":"Lotus","Extension":".png","Modified":false,"Optimized":true,"Length":25964,"MD5":"4c948d4afc7de42ad337c169672c14aa"},{"Name":"Mazda","Extension":".png","Modified":false,"Optimized":true,"Length":22963,"MD5":"c16cbd465745365a27ddee526e4f6b08"},{"Name":"Mclaren","Extension":".png","Modified":false,"Optimized":true,"Length":18710,"MD5":"48f0d91beec263fb7ebc3e0c97d27833"},{"Name":"Mercedes","Extension":".png","Modified":false,"Optimized":true,"Length":17036,"MD5":"a5018196556faeea20f700800acd7dab"},{"Name":"Nissan","Extension":".png","Modified":false,"Optimized":true,"Length":16784,"MD5":"c2da1cd7d6833d55a782b63216b43d04"},{"Name":"Porsche","Extension":".png","Modified":false,"Optimized":true,"Length":23881,"MD5":"7108bf8757975262df3128063605816d"},{"Name":"Subaru","Extension":".png","Modified":false,"Optimized":true,"Length":40879,"MD5":"d3917f4dda5e73069318de16da55474a"},{"Name":"Toyota","Extension":".png","Modified":false,"Optimized":true,"Length":26051,"MD5":"e412c809a60d0f61ab0c0f5cc0590e13"},{"Name":"Renault","Extension":".png","Modified":false,"Optimized":true,"Length":11381,"MD5":"f1c221f89e96d0542fe8a6c4aa2596e0"},{"Name":"Ray","Extension":".png","Modified":false,"Optimized":true,"Length":13817,"MD5":"2edab165a4371c3161869f87e661b3ed"}],"Metadata":{"SimHubVersion":"9.4.4","ScreenCount":1.0,"InGameScreensIndexs":[0],"IdleScreensIndexs":[0],"MainPreviewIndex":0,"IsOverlay":false,"Width":522.0,"Height":25.0,"OverlaySizeWarning":false,"MetadataVersion":2.0,"EnableOnDashboardMessaging":true,"PitScreensIndexs":[]},"ShowOnScreenControls":true,"IsOverlay":false,"EnableClickThroughOverlay":true,"EnableOnDashboardMessaging":true}